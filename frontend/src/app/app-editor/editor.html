<canvas #canvas class="three-canvas" (click)="onCanvasClick($event)"></canvas>

<div class="editor-action-buttons">
	<button *ngIf="userType === 'architect'" mat-flat-button class="save-project-button"
		(click)="saveProjectToServer()">Save project</button>
	<button *ngIf="userType === 'architect'" mat-flat-button class="close-editor-button" (click)="exitEditor()">Close
		editor</button>
	<!-- Placement buttons for window/door -->
	<button mat-flat-button color="primary" (click)="startPlacingFeature('window')"
		[disabled]="editorStateService.placingFeatureType !== null">Place Window</button>
	<button mat-flat-button color="accent" (click)="startPlacingFeature('door')"
		[disabled]="editorStateService.placingFeatureType !== null">Place Door</button>
	<span *ngIf="editorStateService.placingFeatureType" style="margin-left:12px;color:#1976d2;font-weight:bold;">
		Click a wall to place a {{ editorStateService.placingFeatureType }}
	</span>

	<!-- Sofa Placement Proof-of-Concept -->
	<button mat-flat-button color="warn" (click)="placeSofa()" [disabled]="isPlacingSofa">Place Sofa</button>
	<button mat-flat-button color="basic" (click)="removeSofa()" [disabled]="!sofaModel">Remove Sofa</button>
	<span *ngIf="isPlacingSofa" style="margin-left:12px;color:#d32f2f;font-weight:bold;">Loading sofa model...</span>

	<div class="wall-style-panel" style="margin-top: 12px;">
		<label>Wall Color:</label>
		<input type="color" [(ngModel)]="wallColor" (change)="applyWallColor()" />
		<label style="margin-left: 12px;">Wall Texture:</label>
		<select [(ngModel)]="wallTexture" (change)="applyWallTexture()">
			<option value="">None</option>
			<option value="wallpaper_1">Wallpaper 1</option>
			<option value="wallpaper_2">Wallpaper 2</option>
			<!-- Add more as needed -->
		</select>
	</div>
</div>

<!-- Room Metadata Sidebar
<div class="room-metadata-sidebar"
	style="position:fixed;top:0;right:0;z-index:9999;background:#fff;color:#000;padding:8px;border:1px solid #ccc;max-width:400px;"
	*ngIf="selectedRoomMesh && roomMetadata[selectedRoomIndex]">
	<h3>Room Metadata</h3>
	<form (ngSubmit)="$event.preventDefault()">
		<label>
			Name:
			<input type="text" [(ngModel)]="roomMetadata[selectedRoomIndex].name" name="roomName" />
		</label>
		<br />
		<label>
			Type:
			<input type="text" [(ngModel)]="roomMetadata[selectedRoomIndex].type" name="roomType" />
		</label>
		<br />
		<label>
			Area:
			<input type="text" [value]="roomMetadata[selectedRoomIndex].area | number:'1.2-2'" readonly /> mÂ²
		</label>
	</form>
</div> -->